{"name":"Android-app-pause","tagline":"Detect an app-level pause in Android. Currently at v2.1","body":"android-app-pause\r\n=================\r\n\r\nThis library simulates `Application`-level `onPause()` and `onResume()` life cycle events. But, what does that actually mean? For the purposes of this library, the following definitions apply:\r\n\r\n> An app is considered to be paused when the app is no longer visible to the user. By definition, this means that when an app is paused, _none of the `Activity`s that belong to the app are visible to the user_.\r\n\r\nAlong similar lines,\r\n\r\n> An app is considered to be resumed when at least one `Activity` from the app is visible to the user.\r\n\r\nFor more details about why these definitions were chosen, take a look at [this blog post](http://curioustechizen.blogspot.in/2012/12/android-application-level-pause-and.html).\r\n\r\nNote that when a user is using your app, if the device orientation is changed, the user can be considered to be continuing viewing your app. Thus, in general, device orientation changes should **not** be treated as app pause events.\r\n\r\n\r\n##New in v2.0\r\n\r\nv1.0 of this library did not take into account the device rotations. Hence, when you rotated the device, `onStop()` would be called on all the activities, all clients would \"un-bind\", and your `onAppPause()` would be called followed by `onAppResume()`.\r\n\r\nv2.0 takes device rotations into account. By default, device rotations **do not** trigger app pause events. This behavior can be altered using the `setTreatRotationAsAppPause(boolean)` method.\r\n\r\nSee the Appendices at the end of this README for more details regarding the API and implementation changes.\r\n\r\n\r\n##How to Use\r\n\r\n`android-app-pause` is provided as an Android Library project. To use it, follow these steps:\r\n\r\n 1. Add `android-app-pause` as a dependent library to your Android Application Project.\r\n - Extend `AbstractAppPauseApplication` and override the methods `onAppPause()` and `onAppResume()`.\r\n - For every Activity in your app: \r\n   - Extend `AbstractAppPauseActivity`, instead of `android.app.Activity`. \r\n   - (Optional): If you want device rotations to trigger app pauses, call `setTreatRotationAsAppPause` with a value of `true`.\r\n\r\nCheck out the sample project to see how it is used.\r\n\r\n####Note:\r\nIn some cases, it may not possible for you to extend `AbstractAppPauseActivity`. This could happen if you are already inheriting from some other base Activity like one of the Sherlock* Activities from ActionBar Sherlock. In such cases, you can replicate the functionality of `AbstractAppPauseActivity` in your Activities. Take a look at the source for `AbstractAppPauseActivity`.\r\n\r\nJust remember that you need to perform these steps in __every `Activity` in your app__.\r\n\r\n\r\n##When to Use\r\n\r\nThis library is useful when your app has several `Activity`s and you wish to stop or pause certain \"app-wide\" background tasks when your app as a whole \"goes into the background\". There are some background tasks that you would want to keep running as long as user is interacting with your app. However, when user is no longer actively interacting with your app, you would wish to stop/pause these background tasks. \r\n\r\nTypical actions you might want to perform when you app \"pauses\" are:\r\n \r\n - Clearing scheduled Alarms,.\r\n - Stopping HTTP communication. \r\n - Unregistering from broadcasts.\r\n - Stop monitoring the battery\r\n -  ... and the like\r\n\r\nSimilarly, you would want to reverse these actions as soon as your app \"returns to the foreground\".\r\n\r\nNote that this library is _not_ useful if your app has just a single `Activity` or two. In such cases, you could use the `Activity` life-cycle methods `onPause()` and `onResume()` to start/stop background tasks.\r\n\r\n\r\n##Contributing\r\nIf you want to improve this library, fork away. Pull requests are welcome. The appendices at the end of this README contain information for library developers.\r\n\r\n\r\n##Why is this a Library Project?\r\nWell, it doesn't _have_ to be. The library could just as well have been made into a .jar file that you can include in the libs/ folder of your app. I decided to make it an Android Library project to keep room for future enhancements. Also, I really don't like the idea of making a regular Java project and adding `android.jar` as a dependency in order to make it compile.\r\n\r\n\r\n###Appendix 1: API Changes\r\n\r\n  - `AbstractAppActiveService` class has been removed.\r\n  - `AbstractAppPauseApplication` has been introduced.\r\n  - `AbstractAppPauseActivity` no longer has a `getAppActiveServiceClass()` method.\r\n  - `setTreatRotationAsAppPause` method has been added to `AbstractAppPauseActivity` class.\r\n\r\nPlease note that the removals above are not deprecations. I decided not to maintain the old procedure of using `Service`. See the section on **Implementation Changes** below to know more about the reason.\r\n\r\n\r\n###Appendix 2: Implementation changes\r\n\r\nThe high-level functioning of v1.0 of this library was as follows:\r\n\r\n  - Create a bound `Service`.\r\n  - In `onStart()` of every `Activity`, bind the above `Service`.\r\n  - In `onStop()` of every `Activity`, unbind the above `Service`.\r\n  - The `onBind()` method of the `Service` represents an App resume.\r\n  - The `onDestroy()` method of the `Service` represents an App pause.\r\n\r\nAs you can see, this approach does not take device rotations into account. Basically, what you want to do is this:\r\n> If `onStop()` is being called because the device orientation is being changed, then do not perform the unbind.\r\n\r\nHowever, if you bind a Service to an Activity but do not unbind it before the Activity is destroyed, then you get a `ServiceConnectionLeaked` error at runtime.\r\n\r\nTo work around this, v2.0 of this library **discards the `Service` altogether**. Instead, it uses a simple counter mechanism in the custom `Application` class (`AbstractAppPauseApplication`). The functioning is now as follows:\r\n\r\n  - In the `Application` class, maintain an integer counter.\r\n  - in every Activity, if `onStart()` is not being called as result of an orientation change, increment this counter.\r\n  - In every `Activity`, if `onStop()` is not being called as result of an orientation change, decrement the counter.\r\n  - When the count gets incremented from 0 to 1, the app has resumed.\r\n  - When the count gets decremented from 1 to 0, the app has paused.\r\n\r\n\r\n###License\r\n\r\n \r\n\tCopyright 2013 Kiran Rao\r\n\r\n\tLicensed under the Apache License, Version 2.0 (the \"License\");\r\n\tyou may not use this file except in compliance with the License.\r\n\tYou may obtain a copy of the License at\r\n\r\n\t   http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n\tUnless required by applicable law or agreed to in writing, software\r\n\tdistributed under the License is distributed on an \"AS IS\" BASIS,\r\n\tWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n\tSee the License for the specific language governing permissions and\r\n\tlimitations under the License.\r\n","google":"UA-39455420-1","note":"Don't delete this file! It's used internally to help with page regeneration."}